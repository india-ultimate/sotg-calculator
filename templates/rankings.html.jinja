<nav class="d-print-none">
    <div class="nav nav-tabs" id="nav-tab" role="tablist">
        <a class="nav-item nav-link {% if show_rankings %}active{% endif %}" id="nav-rankings-tab" data-toggle="tab" href="#nav-rankings" role="tab" aria-controls="nav-rankings" aria-selected="true">Rankings</a>
        <a class="nav-item nav-link {% if not show_rankings %}active{% endif %}" id="nav-scores-received-tab" data-toggle="tab" href="#nav-scores-received" role="tab" aria-controls="nav-scores-received" aria-selected="false">Spirit Scores (Received)</a>
        <a class="nav-item nav-link" id="nav-scores-awarded-tab" data-toggle="tab" href="#nav-scores-awarded" role="tab" aria-controls="nav-scores-awarded" aria-selected="false">Spirit Scores (Awarded)</a>
    </div>
</nav>

<div class="tab-content" id="nav-tabContent">

    <div class="tab-pane fade {% if show_rankings %}show active{% endif %}" id="nav-rankings" role="tabpanel" aria-labelledby="nav-rankings-tab">
      {% if show_rankings %}
        <div class="table-responsive">
            {{ rankings.render() }}
        </div>
      {% else %}
        <p>
        The final rankings are not shown until the end of the tournament.
        </p>

        <p>
          <small class="form-text text-muted">
            If you are the Spirit Director of the tournament, add a "show-rankings"
            label in the name of the spreadsheet being used to display the final
            rankings. Use this only at the end of the tournament to keep some
            suspense about the winners for the participants of the tournament,
            until the end.
          </small>
        </p>
      {% endif %}
    </div>

    <div class="tab-pane fade {% if not show_rankings %}show active{% endif %}" id="nav-scores-received" role="tabpanel" aria-labelledby="nav-scores-received-tab">
        {% for team, (scores, missing_our, missing_other) in received_scores %}
            <div class="card border mb-5">
                <div class="card-header text-center">
                    <strong>{{team}}</strong>
                </div>
                <div class="card-body table-responsive">
                  <div class="card-subtitle text-muted text-center">
                    <small>
                      Table below compares the scores received by {{team}}
                      against their own self-scores
                    </small>
                  </div>
                  {{ scores|format_scores }}
                  {% if missing_our or missing_other %}
                  <div class="card-text form-text text-muted">
                    <ul>
                      {% for (name, day) in missing_our %}
                      <li> {{team}} has not submitted scores for the game against {{name}} on {{day}}</li>
                      {% endfor %}
                      {% for (name, day) in missing_other %}
                      <li> {{name}} has not submitted scores for the game against {{team}} on {{day}}</li>
                      {% endfor %}
                    </ul>
                  </div>
                  {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>

    <div class="tab-pane fade" id="nav-scores-awarded" role="tabpanel" aria-labelledby="nav-scores-awarded-tab">
        {% for team, (scores, missing_our, missing_other) in awarded_scores %}
            <div class="card border mb-5">
                <div class="card-header text-center">
                  <strong>{{team}}</strong>
                </div>
                <div class="card-body table-responsive">
                  <div class="card-subtitle text-muted text-center">
                    <small>
                    Table below compares the scores awarded by {{team}} to
                    their opponents against the opponent's self-scores
                    </small>
                  </div>
                  {{ scores|format_scores }}
                  {% if missing_our or missing_other %}
                  <div class="card-text form-text text-muted">
                    <ul>
                      {% for (name, day) in missing_our %}
                      <li> {{team}} has not submitted scores for the game against {{name}} on {{day}}</li>
                      {% endfor %}
                      {% for (name, day) in missing_other %}
                      <li> {{name}} has not submitted scores for the game against {{team}} on {{day}}</li>
                      {% endfor %}
                    </ul>
                  </div>
                  {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>

</div>

{% if show_rankings %}
The SOTG scores have been computed using <a href="{{url}}" target="_blank">this data</a>
{% endif %}
